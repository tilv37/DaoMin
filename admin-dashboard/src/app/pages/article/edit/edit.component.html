<section class="inner-content">
  <div>
    <div nz-row [nzGutter]="36">
      <div nz-col [nzSpan]="15">
        <h2>正文编辑:</h2>
        <!-- <nz-divider nzText="编辑" nzOrientation="left"></nz-divider> -->
        <textarea
          nzAutosize
          [nzAutosize]="{ minRows: 25 }"
          nz-input
          [(ngModel)]="newPost.content"
        ></textarea>
      </div>

      <div nz-col [nzSpan]="9">
        <form nz-form>
          <nz-form-item>
            <nz-form-label nzRequired="true">标题</nz-form-label>
            <nz-form-control nzHasFeedback nzErrorTip="Input is required">
              <input
                nz-input
                [(ngModel)]="newPost.title"
                name="title"
                required
                autocomplete="off"
              />
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label>文章摘要</nz-form-label>
            <textarea
              nz-input
              placeholder="Autosize height with minimum and maximum number of lines"
              [nzAutosize]="{ minRows: 2, maxRows: 6 }"
              [(ngModel)]="newPost.summary"
              name="summary"
            ></textarea>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label>英文标题</nz-form-label>
            <nz-form-control>
              <div nz-row [nzGutter]="8">
                <div nz-col [nzSpan]="18">
                  <input
                    nz-input
                    name="titleEn"
                    [(ngModel)]="newPost.titleEn"
                  />
                </div>
                <div nz-col [nzSpan]="6">
                  <button nz-button (click)="getTranslte()">
                    翻译
                  </button>
                </div>
              </div>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label>文章分类</nz-form-label>
            <nz-select
              style="width: 120px;"
              [(ngModel)]="newPost.categoryId"
              nzAllowClear
              nzPlaceHolder="Choose"
              [ngModelOptions]="{ standalone: true }"
              nzShowSearch
            >
              <nz-option
                *ngFor="let option of cates"
                [nzLabel]="option.categoryName"
                [nzValue]="option.id"
              ></nz-option>
            </nz-select>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label nzRequired>发布时间</nz-form-label>
            <nz-form-control>
              <nz-date-picker
                [nzFormat]=""
                nzShowTime
                [(ngModel)]="newPost.createTime"
                name="createTM"
              ></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label nzRequired>文章标签</nz-form-label>
            <nz-select
              [nzMaxTagCount]="3"
              style="width: 100%"
              name="tag"
              nzMode="multiple"
              nzPlaceHolder="Please select"
              [(ngModel)]="newPost.tagIds"
            >
              <nz-option
                *ngFor="let option of tags"
                [nzLabel]="option.tagName"
                [nzValue]="option.id"
              ></nz-option>
            </nz-select>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control [nzOffset]="7" [nzSpan]="12">
              <button nz-button nzType="primary" (click)="preView()">
                预览
              </button>
              <button nz-button nzType="primary" (click)="savePost()">
                发布
              </button>
            </nz-form-control>
          </nz-form-item>
        </form>
      </div>
    </div>
    <nz-modal
      [(nzVisible)]="isVisible"
      nzTitle="预览文章"
      nzMask
      nzMaskClosable="false"
      (nzOnCancel)="handleOk()"
      nzWidth="960"
      [nzStyle]="{ top: '20px' }"
    >
      <markdown [data]="newPost.content" class="markdown-body"></markdown>
      <div *nzModalFooter>
        <button nz-button nzType="primary" (click)="handleOk()">确定</button>
      </div>
    </nz-modal>
  </div>
</section>
